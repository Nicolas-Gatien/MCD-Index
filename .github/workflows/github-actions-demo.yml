name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [push]
env:
    APP_TAG: ghcr.io/nicolas-gatien/mcdi
jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout Code
              uses: actions/checkout@v4
            - run: echo ${{ secrets.PAT }} | docker login ghcr.io -u ${{ secrets.USERNAME }} --password-stdin
            - run: docker build -t $APP_TAG .
            - run: docker push $APP_TAG:latest

    deploy:
        needs: build
        runs-on: ubuntu-latest
        steps:
            - run: echo ${{ secrets.PAT }} | docker login ghcr.io -u ${{ secrets.USERNAME }} --password-stdin
            - run: docker pull $APP_TAG:latest



