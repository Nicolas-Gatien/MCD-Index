name: GitHub Actions Demo
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on: [push]
jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: Check Out the Code
              uses: actions/checkout@v4
            - name: Build & Export
              uses: docker/build-push-action@v6
              with:
                tags: mcd-index:latest
                outputs: type=docker,dest=/tmp/mcd-index.tar
            - name: Upload Artifact
              uses: actions/upload-artifact@v4
              with:
                name: mcd-index
                path: /temp/mcd-index.tar

    deploy:
        needs: build
        runs-on: ubuntu-latest
        steps:
            - name: Download Artifact
              uses: actions/download-artifact@v4
              with:
                name: mcd-index
                path: /tmp
            
            - name: Load Image
              run: |
                docker load --input /tmp/mcd-index.tar
                docker image ls -a
